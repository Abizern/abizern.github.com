<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="The developer and personal blog of
                                          Abizer Nasir, a freelance iOS and OS X
                                          developer in London, UK">
        <meta name="author" content="Abizer Nasir">
        <title>Abizern.org - Home</title>
        <link rel="canonical" href="http://abizern.org">
        <link rel="icon" href="./favicon.png" type="image/png">
        <link rel="apple-touch-icon" sizes="60x60" href="./images/favicon-60.png" type="image/png">
        <link rel="apple-touch-icon" sizes="76x76" href="./images/favicon-76.png" type="image/png">
        <link rel="apple-touch-icon" sizes="120x120" href="./images/favicon-120.png" type="image/png">
        <link rel="apple-touch-icon" sizes="152x152" href="./images/favicon-152.png" type="image/png">
        <link rel="stylesheet" type="text/css" href="./css/main.css">
        <link href="./atom.xml" rel="alternate" title="Abizern.org - A personal and developer blog" type="application/atom+xml">
        <link type="text/plain" rel="author" href="./humans.txt">
        <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5015208-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

        </script>
    </head>

    <body>
        <header id="page_header">
    <h1><a href="./" title="Home">Abizer Nasir</a></h1>
</header>

        <nav id="page_navigation">
    <ul>
        <li><a href="./">Home</a></li>
        <li><a href="./about">About</a></li>
        <li><a href="./archive">Archive</a></li>
        <li><a href="./notes">Notes</a></li>
        <li><a href="./talks">Talks</a></li>
    </ul>
</nav>

        
        <section id="content">
            <article>
    <header>
        <h1>
            <a href="./2015/02/01/debug-logging-in-swift/" title="Permalink">
                Debug Logging In Swift
            </a>
        </h1>
        <span class="post-date">February  1, 2015</span> in 
        <span class="post-tags"><a href="./tags/swift/">swift</a></span>
    </header>
    <p>In the last <a href="https://iosdevweekly.com/issues/183">iOSDevWeekly</a> Dave Verwer listed Art Sabintsev’s <a href="https://github.com/ArtSabintsev/PrintlnMagic">PrintLnMagic</a> - a small function that reproduces the common DLog pattern that many use which not only prints a value, but the filename, the function name and the line of the call. Which is really handy in debugging.</p>
<p>I use a version of <a href="https://gist.github.com/Abizern/325926">Dlog</a> myself, which has the added benefit of only outputting to the console when in Debug configurations, which PrintLnMagic does not do.</p>
<p>So, I wrote this</p>
<script src="https://gist.github.com/Abizern/a81f31a75e1ad98ff80d.js"></script>
<p>I’m not overriding <code>printLn()</code> because I’m not sure clobbering such a widely used system function is a good idea.</p>
<p>Of course Swift projects don’t work the same way as Objective-C projects, so it isn’t enough to just have the debug configuration, this needs to have the <code>-D DEBUG</code> flag set in the “Other Swift Flags” section under Debug.</p>
<div class="figure">
<img src="http://images.abizern.org.s3.amazonaws.com/2015/01/Debug%20flag%20in%20swift.png" alt />

</div>
<p>Installation is simple enough, this is just a single bare function, so just download the file and add it to your project. Call <code>loggingPrintln()</code> just as you would <code>println()</code>, only passing a value for the first parameter; the defaults will take care of the rest.</p>
<p><strong>Update Feb 5, 2015</strong></p>
<p>Rather than just passing an object or a value, the function can now take an expression for the first parameter. That way, the expression is only evaluated if the function body runs. Laziness is a virtue.</p>
<p><strong>Update Oct 8, 2015</strong></p>
<p>Changed to support Swift 2.</p>
<p>Thanks to <a href="https://twitter.com/rob_rix">rob_rix</a> and <a href="https://twitter.com/jl_hfl">jl_hfl</a> for the suggestion.</p>
</article>
<article>
    <header>
        <h1>
            <a href="./2014/12/13/fizz-buzz-in-swift/" title="Permalink">
                Fizz Buzz in Swift
            </a>
        </h1>
        <span class="post-date">December 13, 2014</span> in 
        <span class="post-tags"><a href="./tags/swift/">swift</a>, <a href="./tags/video/">video</a>, <a href="./tags/presentations/">presentations</a></span>
    </header>
    <p>In August 2014 I gave a talk at NSLondon about various approaches to solving Fizz Buzz in Swift. The video is <a href="http://vimeo.com/105440181">available on Vimeo</a> and proved to be reasonably popular and even gained me my first mention in <a href="https://iosdevweekly.com/issues/167">iOS Dev Weekly</a>.</p>
<p>Just to make this more complete here is a link to the slides and a Swift Playground that you can use to play around with the examples.</p>
<p><a href="http://downloads.abizern.org/FizzBuzzery.zip" class="uri">http://downloads.abizern.org/FizzBuzzery.zip</a></p>
<p>Have fun!</p>
</article>
<article>
    <header>
        <h1>
            <a href="./2014/04/18/gcj-b---cookie-clicker-alpha/" title="Permalink">
                GCJ B - Cookie Clicker Alpha
            </a>
        </h1>
        <span class="post-date">April 18, 2014</span> in 
        <span class="post-tags"><a href="./tags/haskell/">haskell</a>, <a href="./tags/gcj/">gcj</a></span>
    </header>
    <p>Another problem from This year’s Google Code Jam.</p>
<p>The gist of the problem is to work out whether buying additional capacity for cookie production would result is reaching the quota faster than not buying additional capacity.</p>
<p>Haskell is suited to this for a couple of reasons. Firstly, its’ easy to work with infinite lists. so I can create list of the cumulative times for creating factories and reaching the target. And to calculate the cumulative target I’m using the <code>scanl1</code> function to turn the infinite list of factory times into an infinite list of partial sums. I’m using <code>scanl1</code> because it starts at 0, which is important as one of the gotcha’s with this is that it may be faster to just generate cookies rather than buying a factory in the first instance.</p>
<p>Secondly, pattern matching. With the infinite list I’m stopping when the time to reach the target starts growing again. Pattern matching makes this very easy to do.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Main</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">Control.Monad</span>
<span class="kw">import </span><span class="dt">Numeric</span>


<span class="co">-- https://code.google.com/codejam/contest/dashboard?c=2974486#s=p1</span>
<span class="co">-- Input and output with standard redirection operators</span>

<span class="ot">factoryTimes ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> [<span class="dt">Double</span>]
factoryTimes c f <span class="fu">=</span> <span class="fl">0.0</span> <span class="fu">:</span> [ c <span class="fu">/</span> (<span class="fl">2.0</span> <span class="fu">+</span> k <span class="fu">*</span> f) <span class="fu">|</span> k <span class="ot">&lt;-</span> [<span class="fl">0.0</span>, <span class="fl">1.0</span> <span class="fu">..</span>]]

<span class="ot">productionTimes ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> [<span class="dt">Double</span>]
productionTimes x f <span class="fu">=</span> [ x <span class="fu">/</span> (<span class="fl">2.0</span> <span class="fu">+</span> k <span class="fu">*</span> f) <span class="fu">|</span> k <span class="ot">&lt;-</span> [<span class="fl">0.0</span>, <span class="fl">1.0</span> <span class="fu">..</span>]]

<span class="ot">times ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> [<span class="dt">Double</span>]
times c f x <span class="fu">=</span> zipWith (<span class="fu">+</span>) production factory
  <span class="kw">where</span> production <span class="fu">=</span> productionTimes x f
        factory <span class="fu">=</span> scanl1 (<span class="fu">+</span>) <span class="fu">$</span> factoryTimes c f

<span class="ot">firstMinimum ::</span> [<span class="dt">Double</span>] <span class="ot">-&gt;</span> <span class="dt">Double</span>
firstMinimum (x<span class="fu">:</span>y<span class="fu">:</span>ys) <span class="fu">=</span> <span class="kw">if</span> x <span class="fu">&lt;</span> y
                        <span class="kw">then</span> x
                        <span class="kw">else</span> firstMinimum (y<span class="fu">:</span>ys)

<span class="ot">solve ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span>
solve c f x <span class="fu">=</span> firstMinimum <span class="fu">$</span> times c f x

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> <span class="kw">do</span>
  t <span class="ot">&lt;-</span> getLine
  forM_ [<span class="dv">1</span><span class="fu">..</span>read<span class="ot"> t ::</span> <span class="dt">Int</span>] <span class="fu">$</span> \i <span class="ot">-&gt;</span> <span class="kw">do</span>
    [c, f, x] <span class="ot">&lt;-</span> fmap (map read <span class="fu">.</span> words) getLine
    <span class="kw">let</span> result <span class="fu">=</span> solve c f x
    putStrLn <span class="fu">$</span> concat [<span class="st">&quot;Case #&quot;</span>, show i, <span class="st">&quot;: &quot;</span>, Numeric.showFFloat (<span class="dt">Just</span> <span class="dv">7</span>) result <span class="st">&quot;&quot;</span>]
    </code></pre></div>
</article>
<article>
    <header>
        <h1>
            <a href="./2014/04/18/gcj-a---magic-trick/" title="Permalink">
                GCJ A - Magic Trick
            </a>
        </h1>
        <span class="post-date">April 18, 2014</span> in 
        <span class="post-tags"><a href="./tags/haskell/">haskell</a>, <a href="./tags/gcj/">gcj</a></span>
    </header>
    <p>I got through the qualification round for Google Code Jam 2014. I usually manage to get through this stage; it’s the first round that I haven’t managed to get past yet.</p>
<p>The easiest question was A-Magic Trick. Nothing much to do here but count the number of similarities between two arrays, easily achieved with the <code>interact</code> method.</p>
<p>The only gotcha in this problem was that the index of the rows to check is 1-based, and most programming languages use 0-based indexing.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Main</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">Control.Monad</span>
<span class="kw">import </span><span class="dt">Data.List</span>

<span class="co">-- https://code.google.com/codejam/contest/dashboard?c=2974486#s=p0</span>
<span class="co">-- Input and output with standard redirection operators</span>

<span class="ot">solve ::</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> <span class="dt">String</span>
solve a b
  <span class="fu">|</span> l <span class="fu">==</span> <span class="dv">1</span> <span class="fu">=</span> show <span class="fu">$</span> head common
  <span class="fu">|</span> l <span class="fu">&gt;</span> <span class="dv">1</span>  <span class="fu">=</span> <span class="st">&quot;Bad magician!&quot;</span>
  <span class="fu">|</span> otherwise <span class="fu">=</span> <span class="st">&quot;Volunteer cheated!&quot;</span>
  <span class="kw">where</span> common <span class="fu">=</span> a <span class="ot">`intersect`</span> b
        l <span class="fu">=</span> length common

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> <span class="kw">do</span>
  t <span class="ot">&lt;-</span> getLine
  forM_ [<span class="dv">1</span><span class="fu">..</span>read<span class="ot"> t ::</span> <span class="dt">Int</span>] <span class="fu">$</span> \i <span class="ot">-&gt;</span> <span class="kw">do</span>
    choice1 <span class="ot">&lt;-</span> fmap read getLine
    initial <span class="ot">&lt;-</span> replicateM <span class="dv">4</span> <span class="fu">$</span> fmap (map read <span class="fu">.</span> words) getLine
    choice2 <span class="ot">&lt;-</span> fmap read getLine
    final <span class="ot">&lt;-</span> replicateM <span class="dv">4</span> <span class="fu">$</span> fmap (map read <span class="fu">.</span> words) getLine
    <span class="kw">let</span> r1 <span class="fu">=</span> initial <span class="fu">!!</span> (choice1 <span class="fu">-</span> <span class="dv">1</span>)
        r2 <span class="fu">=</span> final <span class="fu">!!</span> (choice2 <span class="fu">-</span> <span class="dv">1</span>)
    putStrLn <span class="fu">$</span> concat [<span class="st">&quot;Case #&quot;</span>, show i, <span class="st">&quot;: &quot;</span>, solve r1 r2]</code></pre></div>
</article>
<article>
    <header>
        <h1>
            <a href="./2014/01/05/hakyll-new-post-with-emacs/" title="Permalink">
                Hakyll New Post With Emacs
            </a>
        </h1>
        <span class="post-date">January  5, 2014</span> in 
        <span class="post-tags"><a href="./tags/meta/">meta</a>, <a href="./tags/hakyll/">hakyll</a>, <a href="./tags/emacs/">emacs</a>, <a href="./tags/lisp/">lisp</a></span>
    </header>
    <p>When this blog was created using Octopress, a new post could be created by simply running <code>rake new_post</code> in the Terminal. There is no such convenience in Hakyll, which is currently used as the generator. A small thing, but I wanted to fix it.</p>
<p>I could have created a similar Rake task, or shell script to do this, and there are even examples to be <a href="http://jaspervdj.be/hakyll/examples.html">found</a> on Hakyll’s site. But since I’m usually in Emacs when I want to write a new post, I thought it would be a good excuse to write a little lisp. And so, here is my first attempt.</p>
<div class="sourceCode"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp">(<span class="kw">defun</span><span class="fu"> hakyll-site-location </span>()
  <span class="st">&quot;Return the location of the Hakyll files.&quot;</span>
  <span class="st">&quot;~/Sites/hblog/&quot;</span>)

(<span class="kw">defun</span><span class="fu"> hakyll-new-post </span>(title tags)
  <span class="st">&quot;Create a new Hakyll post for today with TITLE and TAGS.&quot;</span>
  (interactive <span class="st">&quot;sTitle: </span>\n<span class="st">sTags: &quot;</span>)
  (<span class="kw">let</span> ((file-name (hakyll-post-title title)))
    (set-buffer (get-buffer-create file-name))
    (markdown-mode)
    (insert
     (<span class="kw">format</span> <span class="st">&quot;---</span>\n<span class="st">title: %s</span>\n<span class="st">tags: %s</span>\n<span class="st">description: </span>\n<span class="st">---</span>\n\n<span class="st">&quot;</span> title tags))
    (write-file
     (expand-file-name file-name (concat (hakyll-site-location) <span class="st">&quot;posts&quot;</span>)))
    (switch-to-buffer file-name)))

(<span class="kw">defun</span><span class="fu"> hakyll-new-note </span>(title)
  <span class="st">&quot;Create a new Note with TITLE.&quot;</span>
  (interactive <span class="st">&quot;sTitle: &quot;</span>)
  (<span class="kw">let</span> ((file-name (hakyll-note-title title)))
    (set-buffer (get-buffer-create file-name))
    (markdown-mode)
    (insert (<span class="kw">format</span> <span class="st">&quot;---</span>\n<span class="st">title: %s</span>\n<span class="st">description: </span>\n<span class="st">---</span>\n\n<span class="st">&quot;</span> title))
    (write-file
     (expand-file-name file-name (concat (hakyll-site-location) <span class="st">&quot;notes&quot;</span>)))
    (switch-to-buffer file-name)))

(<span class="kw">defun</span><span class="fu"> hakyll-post-title </span>(title)
  <span class="st">&quot;Return a file name based on TITLE for the post.&quot;</span>
  (concat
   (format-time-string <span class="st">&quot;%Y-%m-%d&quot;</span>)
   <span class="st">&quot;-&quot;</span>
   (replace-regexp-in-string <span class="st">&quot; &quot;</span> <span class="st">&quot;-&quot;</span> (downcase title))
   <span class="st">&quot;.markdown&quot;</span>))

(<span class="kw">defun</span><span class="fu"> hakyll-note-title </span>(title)
  <span class="st">&quot;Return a file name based on TITLE for the note.&quot;</span>
  (concat
   (replace-regexp-in-string <span class="st">&quot; &quot;</span> <span class="st">&quot;-&quot;</span> (downcase title))
   <span class="st">&quot;.markdown&quot;</span>))</code></pre></div>
<p>I’m not much of a lisper, and it probably took me longer to write than the time it will save me, but that doesn’t matter. Firstly; it might be useful to somebody else, and so the cumulative time saved could be greater.</p>
<p>Secondly, my day job means I spend most of my coding time in Xcode, which can’t be customised as Emacs can be, and if I don’t spend time writing and learning lisp, I’ll have no chance of getting better at it.</p>
<p>So, I think it’s not bad as a first attempt, although it could obviously be refactored, and you can follow the history of it in my dotfiles <a href="https://github.com/Abizern/prelude/blob/master/personal/hakyll.el">repository</a> if you want to see how it could be developed (or even, you know, help me out with it).</p>
</article>


<footer>
    See older posts in the <a href="./archive/">archive</a>
</footer>

        </section>

        <footer id="page_footer">
    <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC-4.0</a>
    &mdash;
    Built with 
    <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
    &mdash;
    Source on 
    <a href="https://github.com/Abizern/hblog">GitHub</a>
    &mdash;
    <a href="http://abizern.org/atom.xml">RSS feed</a>
</footer>

    </body>
</html>
