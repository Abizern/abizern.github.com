<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="The developer and personal blog of
                                          Abizer Nasir, a freelance iOS and OS X
                                          developer in London, UK">
        <meta name="author" content="Abizer Nasir">
        <title>Abizern.org - A Swift Repeating Timer</title>
        <link rel="canonical" href="http://abizern.org">
        <link rel="icon" href="../../../../favicon.png" type="image/png">
        <link rel="apple-touch-icon" sizes="60x60" href="../../../../images/favicon-60.png" type="image/png">
        <link rel="apple-touch-icon" sizes="76x76" href="../../../../images/favicon-76.png" type="image/png">
        <link rel="apple-touch-icon" sizes="120x120" href="../../../../images/favicon-120.png" type="image/png">
        <link rel="apple-touch-icon" sizes="152x152" href="../../../../images/favicon-152.png" type="image/png">
        <link rel="stylesheet" type="text/css" href="../../../../css/main.css">
        <link href="../../../../atom.xml" rel="alternate" title="Abizern.org - A personal and developer blog" type="application/atom+xml">
        <link type="text/plain" rel="author" href="../../../../humans.txt">
        <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5015208-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

        </script>
    </head>

    <body>
        <header id="page_header">
    <h1><a href="../../../../" title="Home">Abizer Nasir</a></h1>
</header>

        <nav id="page_navigation">
    <ul>
        <li><a href="../../../../">Home</a></li>
        <li><a href="../../../../about">About</a></li>
        <li><a href="../../../../archive">Archive</a></li>
        <li><a href="../../../../notes">Notes</a></li>
        <li><a href="../../../../talks">Talks</a></li>
    </ul>
</nav>

        
        <section id="content">
            <article>
    <header>
        <h1>A Swift Repeating Timer</h1>
        <span class="post-date">October 10, 2015</span> in 
        <span class="post-tags"><a href="../../../../tags/programming/">programming</a>, <a href="../../../../tags/swift/">swift</a></span>
    </header>
    <p>We frequently (excuse the pun) need to schedule a repeated action.</p>
<p>The way to do this was usually to use <code>NSTimer</code>’s <code>scheduledTimerWithTimeInterval(_:,target:,selector:,userInfo:,repeats:)</code>, which needed a callback, and had the hidden pitfall of the target being strongly referenced by the runloop that this timer was scheduled on. There are extensions to NSTimer that allow the used of blocks instead (I even wrote one myself), but there is another way.</p>
<p>Grand Central Dispatch provides <a href="https://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html">dispatch sources</a> for efficient interaction with the underlying system. One such source type is <code>DISPATCH_SOURCE_TYPE_TIMER</code>. So here as a Swift function that creates and starts such a timer.</p>
<script src="https://gist.github.com/Abizern/cf26af397ebe66284002.js"></script>
<p>Since I’m passing in <code>NSTimeInterval</code>s this is probably best used for short lived timers, but it extracts a lot of the C boilerplate that is needed to create the dispatch source.</p>
</article>

        </section>

        <footer id="page_footer">
    <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC-4.0</a>
    &mdash;
    Built with 
    <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
    &mdash;
    Source on 
    <a href="https://github.com/Abizern/hblog">GitHub</a>
    &mdash;
    <a href="http://abizern.org/atom.xml">RSS feed</a>
</footer>

    </body>
</html>
