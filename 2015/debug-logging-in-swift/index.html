<!DOCTYPE html>
<html lang="en-GB">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Developer and personal blog of Abizer Nasir; iOS and macOS contractor in London.">
<meta name="keywords" content="blog, personal, developer, swift, objectivec, ios, macos, haskell, git">

<base href="http://abizern.org">

<title>Abizer Nasir</title>

<meta name="generator" content="Hugo 0.30.2" />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="http://abizern.org/css/main.css">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-GB">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Debug Logging In Swift</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
        PUBLISHED ON FEB 1, 2015 
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    <p>In the last <a href="https://iosdevweekly.com/issues/183">iOSDevWeekly</a> Dave Verwer
listed Art Sabintsev&rsquo;s
<a href="https://github.com/ArtSabintsev/PrintlnMagic">PrintLnMagic</a> - a small function
that reproduces the common DLog pattern that many use which not only prints a
value, but the filename, the function name and the line of the call. Which is
really handy in debugging.</p>

<p>I use a version of <a href="https://gist.github.com/Abizern/325926">Dlog</a> myself, which
has the added benefit of only outputting to the console when in Debug
configurations, which PrintLnMagic does not do.</p>

<p>So, I wrote this</p>

<pre><code class="language-swift">import Foundation

/// Prints the filename, function name, line number and textual representation of `object` and a newline character into the standard output if the build setting for &quot;Active Complilation Conditions&quot; (SWIFT_ACTIVE_COMPILATION_CONDITIONS) defines `DEBUG`.
///
/// The current thread is a prefix on the output. &lt;UI&gt; for the main thread, &lt;BG&gt; for anything else.
///
/// Only the first parameter needs to be passed to this funtion.
///
/// The textual representation is obtained from the `object` using `String(reflecting:)` which works for _any_ type. To provide a custom format for the output make your object conform to `CustomDebugStringConvertible` and provide your format in the `debugDescription` parameter.
/// - Parameters:
///   - object: The object whose textual representation will be printed. If this is an expression, it is lazily evaluated.
///   - file: The name of the file, defaults to the current file without the &quot;.swift&quot; extension.
///   - function: The name of the function, defaults to the function within which the call is made.
///   - line: The line number, defaults to the line number within the file that the call is made.
public func loggingPrint&lt;T&gt;(_ object: @autoclosure () -&gt; T, _ file: String = #file, _ function: String = #function, _ line: Int = #line) {
    #if DEBUG
        let value = object()
        let fileURL = NSURL(string: file)?.lastPathComponent ?? &quot;Unknown file&quot;
        let queue = Thread.isMainThread ? &quot;UI&quot; : &quot;BG&quot;
        
        print(&quot;&lt;\(queue)&gt; \(fileURL) \(function)[\(line)]: &quot; + String(reflecting: value))
    #endif
}


/// Outputs a `dump` of the passed in value along with an optional label, the filename, function name, and line number to the standard output if the build setting for &quot;Active Complilation Conditions&quot; (SWIFT_ACTIVE_COMPILATION_CONDITIONS) defines `DEBUG`.
///
/// The current thread is a prefix on the output. &lt;UI&gt; for the main thread, &lt;BG&gt; for anything else.
///
/// Only the first parameter needs to be passed in to this function. If a label is required to describe what is being dumped, the `label` parameter can be used. If `nil` (the default), no label is output.
/// - Parameters:
///   - object: The object to be `dump`ed. If it is obtained by evaluating an expression, this is lazily evaluated.
///   - label: An optional label that may be used to describe what is being dumped.
///   - file: he name of the file, defaults to the current file without the &quot;.swift&quot; extension.
///   - function: The name of the function, defaults to the function within which the call is made.
///   - line: The line number, defaults to the line number within the file that the call is made.
public func loggingDump&lt;T&gt;(_ object: @autoclosure () -&gt; T, label: String? = nil, _ file: String = #file, _ function: String = #function, _ line: Int = #line) {
    #if DEBUG
        let value = object()
        let fileURL = NSURL(string: file)?.lastPathComponent ?? &quot;Unknown file&quot;
        let queue = Thread.isMainThread ? &quot;UI&quot; : &quot;BG&quot;
        
        print(&quot;--------&quot;)
        print(&quot;&lt;\(queue)&gt; \(fileURL) \(function):[\(line)] &quot;)
        label.flatMap{ print($0) }
        dump(value)
        print(&quot;--------&quot;)
    #endif
}
</code></pre>

<p>An updated version of this is available on <a href="https://github.com/JungleCandy/LoggingPrint/">github</a></p>

<p>I&rsquo;m not overriding <code>printLn()</code> because I&rsquo;m not sure clobbering such a widely
used system function is a good idea.</p>

<p>Of course Swift projects don&rsquo;t work the same way as Objective-C projects, so it
isn&rsquo;t enough to just have the debug configuration, this needs to have the <code>-D
DEBUG</code> flag set in the &ldquo;Other Swift Flags&rdquo; section under Debug.</p>

<p><img src="http://images.abizern.org.s3.amazonaws.com/2015/01/Debug%20flag%20in%20swift.png" alt="" /></p>

<p>Installation is simple enough, this is just a single bare function, so just
download the file and add it to your project. Call <code>loggingPrintln()</code>
just as you would <code>println()</code>, only passing a value for the first parameter; the
defaults will take care of the rest.</p>

<p><strong>Update Feb 5, 2015</strong></p>

<p>Rather than just passing an object or a value, the function can now take an
expression for the first parameter. That way, the expression is only evaluated
if the function body runs. Laziness is a virtue.</p>

<p><strong>Update Oct 8, 2015</strong></p>

<p>Changed to support Swift 2.</p>

<p>Thanks to <a href="https://twitter.com/rob_rix">rob_rix</a> and
<a href="https://twitter.com/jl_hfl">jl_hfl</a> for the suggestion.</p>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
      
      
      TAGS:
      
      
      <a class="meta" href="/tags/swift">SWIFT</a>, 
      
      <a class="meta" href="/tags/xcode">XCODE</a>
      
      
      
    </h6>
  </div>
  
</section>








<section id="menu-pane" class="row menu text-center">
  
  
  <span><a class="menu-item" href="http://abizern.org/2014/fizz-buzz-in-swift/">&lt; prev | </a></span>
  
  
  <span><a class="menu-item" href="/blog">blog</a></span>
  
  
  <span><a class="menu-item" href="http://abizern.org/2015/easy-json-formatting/"> | next &gt;</a></span>
  
  
  <h4 class="text-center"><a class="menu-item" href="http://abizern.org">home</a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">Â© 2009-2017 Abizer Nasir | <a href="https://creativecommons.org/licenses/by-sa/4.0/">Some Rights Reserved</a>.</h6>
  
  <h6 class="text-center powered">Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/shenoybr/hugo-goa">Goa</a>.</h6>
  
  
</footer>

</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>
  

<script type="text/javascript">
hljs.initHighlightingOnLoad();
</script>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


