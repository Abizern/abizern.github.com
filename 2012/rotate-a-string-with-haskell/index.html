<!DOCTYPE html>
<html lang="en-GB">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Developer and personal blog of Abizer Nasir; iOS and macOS contractor in London.">
<meta name="keywords" content="blog, personal, developer, swift, objectivec, ios, macos, haskell, git">

<base href="http://abizern.org">

<title>Abizer Nasir</title>

<meta name="generator" content="Hugo 0.53" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">
<link rel="stylesheet" href="http://abizern.org/css/main.css">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-GB">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Rotate A String with Haskell</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
        PUBLISHED ON APR 15, 2012 
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    <p>I qualified for <a href="http://code.google.com/codejam">Google Code Jam</a> this year
answering 3 out of 4 questions. I have no illusions about progressing very far,
but I&rsquo;m using it as an excuse to learn some Haskell and to write code faster.</p>

<p>As part of the learning process, I took one of my correct solutions over to the
nice folks at the #haskell channel over on freenode and asked if there was a
better way to do it. I learned something surprising.</p>

<p>As part of the solution to the
<a href="http://code.google.com/codejam/contest/1460488/dashboard#s=p2">Recycled Numbers</a>
problem required turning a number such as 1234 into a list of numbers with the
digits rotated [4123, 3412, 2341]. User TSC2 in the channel gave me this simple
way of doing it:</p>

<pre><code class="language-haskell">ghci&gt; (\xs -&gt; let n = length xs in (tail . take n . map (take n) . tails . cycle) xs) &quot;abcde&quot;
[&quot;bcdea&quot;,&quot;cdeab&quot;,&quot;deabc&quot;,&quot;eabcd&quot;]
</code></pre>

<p>I&rsquo;m still new to this so I had to work it out on paper, but here is a step by
step explanation of what is happening: working from right to left as the
functions are evaluated:</p>

<pre><code class="language-haskell">&quot;abcde&quot;
</code></pre>

<p><code>xs</code> is just the input string.</p>

<pre><code class="language-haskell">&quot;abcdeabcde...&quot;
</code></pre>

<p><code>cycle</code> creates an infinite list out of the input list by repeating it. Haskell
is lazy. It doesn&rsquo;t actually create the list until it actually needs it, so I&rsquo;ve
added the ellpises just to show the concept that this is repeated infinitely.</p>

<pre><code class="language-haskell">[&quot;abcdeabcde...&quot;, &quot;bcdeabcdea...&quot;, &quot;cdeabcdeab...&quot;, &quot;deabcdeabc...&quot;, ...]
</code></pre>

<p>This is where things start to get interesting. <code>tails</code> creates a list out of
successive tails of a list. If you were to do this on a finite list you&rsquo;d get a
list of smaller and smaller elements. For example:</p>

<pre><code class="language-haskell">ghci&gt; tails &quot;abcde&quot;
[&quot;abcde&quot;,&quot;bcde&quot;,&quot;cde&quot;,&quot;de&quot;,&quot;e&quot;,&quot;&quot;]
</code></pre>

<p>But since our input is an infinite we now have an infinite list of infinite
lists, each element starting at one letter in from the original list. Remember,
this hasn&rsquo;t actually been worked out yet.</p>

<pre><code class="language-haskell">[&quot;abcde&quot;, &quot;bcdea&quot;, &quot;cdeab&quot;, &quot;deabc&quot;, &quot;eabcd&quot; &quot;abcde&quot;, ...]
</code></pre>

<p><code>take n</code> takes the first <code>n</code> elements of a list. Our lambda expression defines
this as the length of the list, which is 5. And <code>map</code> applies this to each
element of the list. So now we have an infinite list of 5 element lists. which is
closer to our required final output.</p>

<pre><code class="language-haskell">[&quot;abcde&quot;, &quot;bcdea&quot;, &quot;cdeab&quot;, &quot;deabc&quot;, &quot;eabcd&quot;]
</code></pre>

<p>Applying <code>take n</code> again to the infinite list takes the first 5 elements of the
finite list</p>

<pre><code class="language-haskell">[&quot;bcdea&quot;, &quot;cdeab&quot;, &quot;deabc&quot;, &quot;eabcd&quot;]
</code></pre>

<p>Applying <code>tail</code> to the finite list takes all but the first element, and we get
the output that we were looking for. Even though along the way we had an
infinite list of infinite lists.</p>

<p>And yet all Haskell did was provide a promise (a <em>thunk</em> in functional terms)
that it would provide the answer when it was asked for, and as the function
progressed the infinite list of infinite list became an infinite list of finite
lists and then a finite list. And still it didn&rsquo;t actually resolve all those
calls until it was actually needed. In this case, when the <em>ghci</em> interpreter
tried to get a string to display on the screen.</p>

<p>Freaky or what?</p>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
      
      
      TAGS:
      
      
      <a class="meta" href="/tags/haskell">HASKELL</a>
      
      
      
    </h6>
  </div>
  
</section>








<section id="menu-pane" class="row menu text-center">
  
  
  <span><a class="menu-item" href="http://abizern.org/2012/reverse-words-with-haskell/">&lt; prev | </a></span>
  
  
  <span><a class="menu-item" href="/blog">blog</a></span>
  
  
  <span><a class="menu-item" href="http://abizern.org/2012/london-coderdojo/"> | next &gt;</a></span>
  
  
  <h4 class="text-center"><a class="menu-item" href="http://abizern.org">home</a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">Â© 2009-2017 Abizer Nasir | <a href="https://creativecommons.org/licenses/by-sa/4.0/">Some Rights Reserved</a>.</h6>
  
  <h6 class="text-center powered">Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/shenoybr/hugo-goa">Goa</a>.</h6>
  
  
</footer>

</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>
  

<script type="text/javascript">
hljs.initHighlightingOnLoad();
</script>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


